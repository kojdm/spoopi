(this.webpackJsonpspoopi=this.webpackJsonpspoopi||[]).push([[0],[,,,,function(e,t,a){e.exports=a.p+"static/media/spoopi-arrow.0452a0a7.png"},function(e,t,a){e.exports=a(27)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),o=a.n(c),s=(a(10),a(1));a(11),a(12),a(13);var i=function(e){var t=e.spoopiPlaylist;return r.a.createElement("div",{className:"SpoopiStatus"},r.a.createElement("table",null,Object.entries(t).map((function(e){if(!e[1])return null;var t=function(e){var t=e[0],a=e[1];switch(t){case"categories":return["categories",a.map((function(e){return e.replace("_"," ")})).join(", ")];case"duration":var n=a/60,c=Math.floor(n/60);return["duration",c+"h "+(n-=60*c)+"m"];case"track_count":return["# of songs",a];case"name":return["name",a];case"spotify_url":return["spotify link",r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},"click to open in spotify")];default:return null}}(e),a=Object(s.a)(t,2),n=a[0],c=a[1];return r.a.createElement("tr",null,r.a.createElement("td",{className:"t-key"},n),r.a.createElement("td",{className:"t-val"},c))}))))};var l=function(e){var t=e.current_page,a=e.spoopiPlaylist,c=Object(n.useState)(window.innerWidth>=800),o=Object(s.a)(c,2),l=o[0],u=o[1];return r.a.createElement("div",{className:"SpoopiNav"},r.a.createElement("div",{className:"spoopi-logo cursive"},"spoopi"),r.a.createElement("div",{className:"spoopi-description"},"(spo)tify (p)laylist t(i)mer"),r.a.createElement("div",{className:"spoopi-info"+(l?" info-clicked":""),onClick:function(){u(!l)}},"categories"===t?"?":r.a.createElement("span",null,"\u2630")),"categories"===t&&l&&r.a.createElement("div",{className:"spoopi-intro cursive"},"welcome to spoopi! here you can create timed spotify playlists. just give spoopi some categories and a duration and it'll find songs that fit into the time you gave it. have fun!"),"categories"!==t&&l&&r.a.createElement(i,{spoopiPlaylist:a}))};a(14),a(15),a(16);var u=function(e){var t=e.id,a=e.name,n=e.image_url,c=e.handleCatCount,o=e.handleCategories,s=e.isSelected;return r.a.createElement("div",{className:"CategoryBox"+(s?" category-selected":""),onClick:function(){c(s?-1:1)<=5&&o(t)}},r.a.createElement("img",{className:"category-image",src:n,alt:t}),r.a.createElement("div",{className:"category-name"},a))};a(17);var m=function(e){var t=e.content,a=e.nextable,n=e.reload,c=e.nextPage;return r.a.createElement("div",{className:"NextButton"+(a?" nextable":""),onClick:function(){if(n)return a&&c("reload");a&&c("next")}},r.a.createElement("div",{className:"next-button-content"},t,a&&r.a.createElement("span",{className:"next-arrow"},"\xbb")))};var p=function(e){var t=e.countryCode,a=e.setCountryCode,c=e.handleCategories,o=e.pageTraversal,i=e.selectedCategories,l=Object(n.useState)([]),p=Object(s.a)(l,2),d=p[0],f=p[1],g=Object(n.useState)(i.length),v=Object(s.a)(g,2),h=v[0],b=v[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("allCategories")),n=localStorage.getItem("countryCode");if(e&&n)return a(n),void f(e);fetch("https://www.cloudflare.com/cdn-cgi/trace").then((function(e){return e.text()})).then((function(e){var t=e.indexOf("loc"),n=e.slice(t+4,t+6);a(n),localStorage.setItem("countryCode",n)})),fetch("https://spoopi-api.herokuapp.com/categories"+(t?"?country_code="+t:"")).then((function(e){return e.json()})).then((function(e){f(e.categories),localStorage.setItem("allCategories",JSON.stringify(e.categories))}))}),[t,a]);var y=function(e){var t=h+e;return t<=5&&b(t),t};return r.a.createElement("div",{className:"CategoriesContainer"},d.map((function(e){return r.a.createElement(u,{id:e.id,name:e.name,image_url:e.image_url,handleCatCount:y,handleCategories:c,isSelected:i.indexOf(e.id)>=0})})),r.a.createElement(m,{content:5===h?"5 of 5 selected":h>=1?h+" selected":"Choose up to 5 categories",nextable:h>=1,nextPage:o}))},d=(a(18),a(19),parseInt("8")),f=parseInt("15");var g=function(e){var t=e.symbol,a=e.placeholder,n=e.setTime,c=e.value,o=e.readonly,s=e.hours;return r.a.createElement("div",{className:"TimerInput"},r.a.createElement("input",{type:"number",onChange:function(e){e.target.value=e.target.value.slice(0,2);var a=parseInt(e.target.value);"h"===t&&a>d?e.target.value=d:"m"===t&&a>59&&(e.target.value=59),a<0&&(e.target.value=0),n(t,e.target.value)},placeholder:a,value:0===c?"":c,readOnly:o,onBlur:function(e){if("m"===t){var a=parseInt(e.target.value||0);(s=parseInt(s||0))<=0&&a<f&&n(t,f)}}}),r.a.createElement("div",{className:"input-symbol"},t))},v=parseInt("8"),h=parseInt("15");var b=function(e){var t=e.duration,a=e.handleDuration,c=e.pageTraversal,o=function(){var e=t/60,a=Math.floor(e/60);return[a,e-=60*a]}(),i=Object(n.useState)(o[0]),l=Object(s.a)(i,2),u=l[0],p=l[1],d=Object(n.useState)(o[1]),f=Object(s.a)(d,2),b=f[0],y=f[1],E=function(e,t){t=parseInt(t||0),"h"===e?(p(t||null),t>=v&&y("00"),t<=0&&b<h&&y(h)):(parseInt(u||0)>=v&&(t=0),y(t||null))};return Object(n.useEffect)((function(){a(u,b)})),r.a.createElement("div",{className:"TimerContainer"},r.a.createElement(g,{symbol:"h",placeholder:"00",setTime:E,value:u}),r.a.createElement(g,{symbol:"m",placeholder:"00",setTime:E,value:b,readonly:u>=v,hours:u}),r.a.createElement(m,{content:function(){var e=[];u<=0&&b>=1?e=[b,"min"]:b<=0&&u>=1?e=[u,"hour"]:u>=1&&b>=1&&(e=[u,"hour",b,"min"]);var t=e.join(" ");return e.length<=0?"Enter a duration for your playlist":"Create "+t+" playlist"}(),nextable:0!==u||0!==b,nextPage:c}))};a(20),a(21);var y=function(e){var t=e.content,a=e.warning;return r.a.createElement("div",{className:"SpoopiLoader"},r.a.createElement("div",{className:"spoopi-loader-spinner"}),r.a.createElement("div",{className:"spoopi-loader-content"},t),r.a.createElement("div",{className:"spoopi-loader-warning"},a||""))};a(22);var E=function(e){e.content;var t=e.nextable,a=e.name,c=e.setName,o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],m=Object(n.useState)([]),p=Object(s.a)(m,2),d=p[0],f=p[1];Object(n.useEffect)((function(){fetch("https://random-word-api.herokuapp.com/word?swear=0&number=2").then((function(e){return e.json()})).then((function(e){f(e)}))}),[]);var g=function(){return d.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")};return r.a.createElement("div",{className:"AddToSpotifyButton-container"},l&&r.a.createElement("div",{className:"spoopi-name"},"Give your playlist a name:",r.a.createElement("input",{type:"text",onChange:function(e){e.target.value=e.target.value.slice(0,30),c(e.target.value)},placeholder:g()})),r.a.createElement("div",{className:"AddToSpotifyButton"+(t?" nextable":""),onClick:function(){if(t){if(!l)return u(!0);a.length<=0&&c(g());window.open("https://spoopi-api.herokuapp.com/authenticate_user","_blank","titlebar=no, status=no")}}},r.a.createElement("div",{className:"addtospotify-button-content"},"Add to Spotify",t&&r.a.createElement("span",{className:"next-arrow"},"\xbb"))))};a(23);var k=function(e){var t=e.track,a=e.useIframe;return r.a.createElement("div",{className:"TrackBox"+(a?"":" spoopi-track-box")},a?r.a.createElement("iframe",{className:"track-iframe",title:t.id,src:"https://open.spotify.com/embed/track/"+t.id,frameborder:"",allowtransparency:"true",allow:"encrypted-media"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"track-image",src:t.image_url,alt:t.id}),r.a.createElement("div",{className:"track-name"},t.name),r.a.createElement("div",{className:"track-artists"},t.artists.join(", "))))};var j=function(e){var t=e.duration,a=e.categories,c=e.countryCode,o=e.tracks,i=e.handleTracks,l=e.pageTraversal,u=e.setBackable,m=e.name,p=e.setName,d=e.accessToken,f=e.setPlaylist,g=Object(n.useState)(!0),v=Object(s.a)(g,2),h=v[0],b=v[1],j=Object(n.useState)(0),O=Object(s.a)(j,2),N=O[0],w=O[1];Object(n.useEffect)((function(){if(!(t<=0||a.length<=0)){u(!1);var e="https://spoopi-api.herokuapp.com/generate_tracks?seconds="+t+"&category_ids="+a.join(",")+"&country_code="+c;fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.spoopi.tracks,a=t.reduce((function(e,t){return e+t.duration}),0);b(!1),i(t),w(a),u(!0)}))}}),[t,a,c,i,u]),Object(n.useEffect)((function(){if(!(!d||o.length<=0||a.length<=0||t<=0||m.length<=0)){var e=o.map((function(e){return e.uri})).join(","),n={access_token:d,track_uris:e,pl_name:m,category_ids:a.join(","),seconds:t,actual_duration:N};fetch("https://spoopi-api.herokuapp.com/create_playlist",{method:"POST",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){f(e.new_playlist)})),l("next")}}),[d]);var C=o.length<=20;return r.a.createElement("div",{className:h?"":"TracksContainer"+(C?" iframe-columns":" spoopi-tracks-columns")},h?r.a.createElement(y,{content:"Generating tracks...",warning:"This could take a while for longer playlists"}):o.map((function(e){return r.a.createElement(k,{track:e,useIframe:C})})),h?null:r.a.createElement(E,{nextable:!h,nextPage:l,name:m,setName:p}))};a(24);var O=function(e){var t=e.playlist,a=e.pageTraversal,c=Object(n.useState)(!0),o=Object(s.a)(c,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){l(!1)}),2e3);return function(){return clearTimeout(e)}}),[]),r.a.createElement("div",{className:"PlaylistContainer"},i?r.a.createElement(y,{content:"Fetching playlist..."}):r.a.createElement(r.a.Fragment,null,r.a.createElement("iframe",{className:"playlist-iframe",title:t.id,src:"https://open.spotify.com/embed/playlist/"+t.id,frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}),r.a.createElement(m,{content:"Create another Spoopi Playlist",nextable:!0,reload:!0,nextPage:a})))};a(25);var N=function(e){var t=e.backPage;return e.backable?r.a.createElement("div",{className:"BackButton",onClick:function(){t("back")}},r.a.createElement("div",{className:"back-button-content"},r.a.createElement("span",{className:"back-arrow"},"\xab"),"Back")):null},w=(a(26),a(4)),C=a.n(w),S=parseInt("8"),_=parseInt("15");var x=function(e){var t=e.current_page,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){var e="";return"categories"===t?e="choose which categories you want your playlist to have":"timer"===t?e="select a duration between\n".concat(_," mins and ").concat(S," hours"):"tracks"===t?e="pro-tip: shorter playlists' songs can be previewed before adding to spotify":"playlist"===t&&(e="enjoy your spoopi playlist!"),i(e)}),[t]),r.a.createElement("div",{className:"SpoopiTip "+t+"-tip-container"},r.a.createElement("div",{className:"spoopi-tip-content cursive"},o),r.a.createElement("img",{className:"spoopi-arrow "+t+"-arrow",src:C.a,alt:"spoopi-arrow"}))};var T=function(e){var t=e.current_page,a=e.pageTraversal,c=e.categories,o=e.setCategories,i=e.duration,l=e.setDuration,u=e.tracks,m=e.setTracks,d=e.name,f=e.setName,g=e.playlist,v=e.setPlaylist,h=Object(n.useState)(!0),y=Object(s.a)(h,2),E=y[0],k=y[1],w=Object(n.useState)(""),C=Object(s.a)(w,2),S=C[0],_=C[1],T=Object(n.useState)(""),I=Object(s.a)(T,2),P=I[0],B=I[1];return Object(n.useEffect)((function(){window.addEventListener("message",(function(e){var t=e.data.access_token;t&&B(t)}),!1)}),[]),Object(n.useEffect)((function(){if(window.location.hash.length>0){var e=window.location.hash,t=e.substring(e.indexOf("=")+1,e.indexOf("&"));window.opener.postMessage({access_token:t}),window.close()}}),[]),r.a.createElement("div",{className:"SpoopiContainer"},"categories"===t&&r.a.createElement(p,{countryCode:S,setCountryCode:_,handleCategories:function(e){var t=c,a=t.indexOf(e);a>=0?t.splice(a,1):t.push(e),o(t)},selectedCategories:c,pageTraversal:a}),"timer"===t&&r.a.createElement(b,{duration:i,handleDuration:function(e,t){var a=60*parseInt(e||0)*60,n=60*parseInt(t||0);l(a+n)},pageTraversal:a}),"tracks"===t&&r.a.createElement(j,{duration:i,categories:c,countryCode:S,tracks:u,handleTracks:m,pageTraversal:a,setBackable:k,name:d,setName:f,accessToken:P,setPlaylist:v}),"playlist"===t&&r.a.createElement(O,{playlist:g,pageTraversal:a}),"categories"!==t&&"playlist"!==t&&r.a.createElement(N,{backPage:a,backable:E}),r.a.createElement(x,{current_page:t}))},I={current_page:"categories"},P=["categories","timer","tracks","playlist"],B=function(e,t){switch(t){case"next":var a=P.indexOf(e.current_page)+1;return{current_page:P[a]};case"back":var n=P.indexOf(e.current_page)-1;return{current_page:P[n]};case"reload":return window.location.reload();default:throw new Error}};var A=function(){var e=Object(n.useReducer)(B,I),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(0),d=Object(s.a)(p,2),f=d[0],g=d[1],v=Object(n.useState)([]),h=Object(s.a)(v,2),b=h[0],y=h[1],E=Object(n.useState)(""),k=Object(s.a)(E,2),j=k[0],O=k[1],N=Object(n.useState)({}),w=Object(s.a)(N,2),C=w[0],S=w[1],_={categories:u,duration:f,track_count:b.length,name:j,spotify_url:C.spotify_url};return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"column left"},r.a.createElement(T,{current_page:a.current_page,pageTraversal:c,categories:u,setCategories:m,duration:f,setDuration:g,tracks:b,setTracks:y,name:j,setName:O,playlist:C,setPlaylist:S})),r.a.createElement("div",{className:"column right"},r.a.createElement(l,{current_page:a.current_page,spoopiPlaylist:_})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.f46e7575.chunk.js.map